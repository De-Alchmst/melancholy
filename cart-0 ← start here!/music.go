package main

import "cart/w4"

// made with IWAS!

const (
	musicvolume = 50
	musicDuration = 5
	musicFlags = w4.TONE_TRIANGLE | w4.TONE_MODE2
	musicGap = 10
)

var (
	MainSong = []byte { 60, 59, 58, 0, 0, 0, 59, 58, 57, 0, 0, 58, 57, 56, 0, 0, 57, 56, 55, 60, 58, 0, 0, 59, 60, 59, 58, 0, 0, 0, 59, 58, 57, 0, 0, 58, 57, 56, 0, 0, 60, 58, 54, 59, 61, 0, 0, 0, 58, 57, 56, 0, 0, 57, 56, 55, 0, 56, 55, 54, 55, 0, 51, 60, 57, 0, 0, 58, 57, 56, 0, 0, 57, 56, 55, 0, 55, 56, 55, 0, 0, 57, 52, 0, 0, 0, 0, 62, 0, 57, 59, 53, 52, 0, 0, 0, 59, 0, 55, 57, 53, 51, 0, 0, 57, 0, 54, 56, 51, 49, 0, 0, 59, 56, 0, 0, 0, 0, 0, 58, 0, 0, 0, 0, 0, 58, 0, 0, 0, 0, 58, 0, 0, 0, 58, 0, 0, 0, 58, 0, 0, 58, 0, 0, 58, 0, 58, 0, 58, 58, 58, 58, 58, 58, 58, 58, 63, 52, 60, 57, 60, 58, 0, 59, 0, 0, 0, 63, 0, 0, 0, 60, 57, 63, 59, 61, 0, 60, 0, 56, 57, 55, 0, 57, 58, 55, 0, 55, 54, 53, 52, 54 }
	CurrentSong = &MainSong

	MusicIndex = 0
	MusicCounter = 0
	noteLookupTable = []uint{    0,
      16,   17,   18,   19,   20,   21,   23,   24,
      25,   27,   29,   30,   32,   34,   36,   38,
      41,   43,   46,   49,   51,   55,   58,   61,
      65,   69,   73,   77,   82,   87,   92,   98,
     103,  110,  116,  123,  130,  138,  146,  155,
     164,  174,  185,  196,  207,  220,  233,  246,
     261,  277,  293,  311,  329,  349,  369,  392,
     415,  440,  466,  493,  523,  554,  587,  622,
     659,  698,  739,  783,  830,  880,  932,  987,
    1046, 1108, 1174, 1244, 1318, 1396, 1479, 1567,
    1661, 1760, 1864, 1975, 2093, 2217, 2349, 2489,
    2637, 2793, 2959, 3135, 3322, 3520, 3729, 3951,
	}
)


func UpdateMusic() {
	MusicCounter -= 1
	if MusicCounter <= 0 {
		MusicCounter = musicGap

		w4.Tone(noteLookupTable[(*CurrentSong)[MusicIndex]], musicDuration, musicvolume, musicFlags)

		MusicIndex += 1
		if MusicIndex >= len(*CurrentSong) {
			MusicIndex = 0
		}
	}
}
